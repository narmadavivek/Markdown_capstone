'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mapText = exports.filterText = undefined;

var _immutableArrayMethods = require('immutable-array-methods');

var _immutableObjectMethods = require('immutable-object-methods');

var filter = function filter(array, fn) {
  return (0, _immutableArrayMethods.map)((0, _immutableArrayMethods.filter)(array, fn), function (obj) {
    return obj.children ? (0, _immutableObjectMethods.set)(obj, 'children', filter(obj.children, fn)) : obj;
  });
};

var filterText = exports.filterText = function filterText(array, fn) {
  return filter(array, function (obj) {
    return obj.type === 'text' ? fn(obj) : true;
  });
};

var map = function map(array, fn) {
  return (0, _immutableArrayMethods.map)(array, function (obj) {
    if (obj.children) {
      obj = (0, _immutableObjectMethods.set)(obj, 'children', map(obj.children, fn));
    }

    if (obj.caption) {
      obj = (0, _immutableObjectMethods.set)(obj, 'caption', map(obj.caption, fn));
    }

    if (obj.attribution) {
      obj = (0, _immutableObjectMethods.set)(obj, 'attribution', map(obj.attribution, fn));
    }

    return fn(obj);
  });
};

var mapText = exports.mapText = function mapText(array, fn) {
  return map(array, function (obj) {
    return obj.type === 'text' ? fn(obj) : obj;
  });
};
